package com.github.hakobera.wiiremote;

import wiiremotej.WiiRemote;
import wiiremotej.WiiRemoteExtension;
import wiiremotej.WiiRemoteJ;
import wiiremotej.event.WRAccelerationEvent;
import wiiremotej.event.WRButtonEvent;
import wiiremotej.event.WRCombinedEvent;
import wiiremotej.event.WRExtensionEvent;
import wiiremotej.event.WRIREvent;
import wiiremotej.event.WRStatusEvent;
import wiiremotej.event.WiiRemoteListener;

public class WiiRemoteProxy {
	
	public static void main(String[] args) throws Exception {
    	System.setProperty("bluecove.jsr82.psm_minimum_off", "true");  
        WiiRemoteJ.setConsoleLoggingAll();
        
        //Find and connect to a Wii Remote
        WiiRemote remote = null;
        
        while (remote == null) {
            try {
                remote = WiiRemoteJ.findRemote();
            } catch (Exception e) {
                remote = null;
                e.printStackTrace();
                System.out.println("Failed to connect remote. Trying again.");
                Thread.sleep(500);
            }
        }
        
        remote.addWiiRemoteListener(new WiiRemoteDataDispatcher(remote));
        remote.setAccelerometerEnabled(true);
        remote.setSpeakerEnabled(false);
        remote.setIRSensorEnabled(true, WRIREvent.BASIC);
        remote.setLEDIlluminated(0, true);
	}
	
}
